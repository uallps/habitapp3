@startuml Goals_UseCases
!theme plain
skinparam backgroundColor #FEFEFE
skinparam actorBackgroundColor #E8F4F8
skinparam actorBorderColor #0066CC
skinparam usecaseBackgroundColor #E8F4F8
skinparam usecaseBorderColor #0066CC

title Goals - Diagrama de Casos de Uso

left to right direction

actor Usuario as user
actor Sistema as system

usecase UC1 as "Crear Objetivo"
usecase UC2 as "Ver Objetivos"
usecase UC3 as "Editar Objetivo"
usecase UC4 as "Eliminar Objetivo"
usecase UC5 as "Marcar Completado"
usecase UC6 as "Crear Milestone"
usecase UC7 as "Ver Progreso"
usecase UC8 as "Vincular con Hábito"
usecase UC9 as "Sincronizar Progreso"
usecase UC10 as "Persistir en Core Data"
usecase UC11 as "Calcular Métricas"

' Relaciones Usuario
user --> UC1
user --> UC2
user --> UC3
user --> UC4
user --> UC5
user --> UC6
user --> UC7
user --> UC8

' Relaciones Sistema
UC1 ..> UC10 : <<include>>
UC3 ..> UC10 : <<include>>
UC4 ..> UC10 : <<include>>
UC5 ..> UC10 : <<include>>
UC6 ..> UC10 : <<include>>

UC2 ..> UC10 : <<include>>
UC7 ..> UC10 : <<include>>
UC7 ..> UC11 : <<include>>

UC8 ..> UC1 : <<extend>>
UC9 ..> UC7 : <<extend>>
UC8 ..> UC9 : <<include>>

system --> UC10
system --> UC11
system --> UC9

note right of UC8
  Asocia un objetivo
  con un hábito mediante
  habitId
end note

note right of UC9
  Sincroniza contador
  de completados del
  hábito con progreso
  del objetivo
end note

note right of UC11
  Calcula: % Progreso,
  Días Restantes,
  Verifica Milestones
end note

@enduml
