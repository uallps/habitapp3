@startuml
top to bottom direction
skinparam nodesep 10
!include <archimate/Archimate>

' Nodo principal - Core del proyecto
Application_Component(core, "HabitApp Core")

' Características principales
Application_Component(habit, "Habit")
Application_Component(dailyNote, "DailyNote")
Application_Component(goals, "Goals")
Application_Component(persistencia, "Persistencia")

' Sub-características de Habit
Application_Component(habitId, "Identificador")
Application_Component(habitTitle, "Nombre")
Application_Component(habitDesc, "Descripción")
Application_Component(habitPriority, "Nivel de Prioridad")
Application_Component(habitCreatedDate, "Fecha de Creación")
Application_Component(habitIsCompleted, "Estado de Completitud")
Application_Component(habitCompletionDates, "Fechas de Completitud")

' Valores de Nivel de Prioridad
Application_Component(priorityLow, "Bajo")
Application_Component(priorityMedium, "Medio")
Application_Component(priorityHigh, "Alto")

' Sub-características de DailyNote
Application_Component(noteId, "Identificador")
Application_Component(noteContent, "Contenido")
Application_Component(noteDate, "Fecha de Nota")
Application_Component(noteCreatedDate, "Fecha de Creación")
Application_Component(noteUpdatedDate, "Fecha de Actualización")
Application_Component(noteHabitRef, "Referencia del Hábito")

' Sub-características de Goals
Application_Component(goalId, "Identificador")
Application_Component(goalTitle, "Nombre")
Application_Component(goalDesc, "Descripción")
Application_Component(goalTarget, "Valor Meta")
Application_Component(goalProgress, "Progreso Actual")
Application_Component(goalDeadline, "Fecha Límite")
Application_Component(goalStatus, "Estado")
Application_Component(goalCreatedDate, "Fecha de Creación")
Application_Component(goalUpdatedDate, "Fecha de Actualización")
Application_Component(milestones, "Hitos")

' Sub-sub-características de Hitos
Application_Component(milestoneId, "Identificador")
Application_Component(milestoneTitle, "Nombre")
Application_Component(milestoneDesc, "Descripción")
Application_Component(milestoneTarget, "Valor Meta")
Application_Component(milestoneProgress, "Progreso Actual")
Application_Component(milestoneOrder, "Orden de Secuencia")
Application_Component(milestoneCompleted, "Completado")

' Sub-características de Persistencia
Application_Component(storageProvider, "Proveedor de Almacenamiento")
Application_Component(swiftData, "Almacenamiento SwiftData")

' Relaciones del Core
Rel_Composition(core, habit, "")
Rel_Composition(core, dailyNote, "")
Rel_Aggregation(core, goals, "")
Rel_Composition(core, persistencia, "")

' Sub-características de Habit
Rel_Composition(habit, habitId, "")
Rel_Composition(habit, habitTitle, "")
Rel_Composition(habit, habitDesc, "")
Rel_Composition(habit, habitPriority, "")
Rel_Composition(habit, habitCreatedDate, "")
Rel_Composition(habit, habitIsCompleted, "")
Rel_Composition(habit, habitCompletionDates, "")

' Valores de Nivel de Prioridad (alternativas)
Rel_Specialization(priorityLow, habitPriority, "")
Rel_Specialization(priorityMedium, habitPriority, "")
Rel_Specialization(priorityHigh, habitPriority, "")

' Sub-características de DailyNote
Rel_Composition(dailyNote, noteId, "")
Rel_Composition(dailyNote, noteContent, "")
Rel_Composition(dailyNote, noteDate, "")
Rel_Composition(dailyNote, noteCreatedDate, "")
Rel_Composition(dailyNote, noteUpdatedDate, "")
Rel_Composition(dailyNote, noteHabitRef, "")

' Sub-características de Goals
Rel_Composition(goals, goalId, "")
Rel_Composition(goals, goalTitle, "")
Rel_Composition(goals, goalDesc, "")
Rel_Composition(goals, goalTarget, "")
Rel_Composition(goals, goalProgress, "")
Rel_Composition(goals, goalDeadline, "")
Rel_Composition(goals, goalStatus, "")
Rel_Composition(goals, goalCreatedDate, "")
Rel_Composition(goals, goalUpdatedDate, "")
Rel_Aggregation(goals, milestones, "")

' Sub-sub-características de Milestones
Rel_Composition(milestones, milestoneId, "")
Rel_Composition(milestones, milestoneTitle, "")
Rel_Composition(milestones, milestoneDesc, "")
Rel_Composition(milestones, milestoneTarget, "")
Rel_Composition(milestones, milestoneProgress, "")
Rel_Composition(milestones, milestoneOrder, "")
Rel_Composition(milestones, milestoneCompleted, "")

' Sub-características de Persistencia
Rel_Composition(persistencia, storageProvider, "")
Rel_Specialization(swiftData, storageProvider, "implementa")
Rel_Realization(swiftData, storageProvider, "requiere")

' RELACIONES DESDE HÁBITO (solo líneas desde Hábito que actualiza otros componentes)

' Hábito → Nota Diaria
Rel_Association_dir(habit, dailyNote, "puede crear")

' Hábito → Metas (cuando Hábito cambia, actualiza Meta)
Rel_Triggering(habitIsCompleted, goalProgress, "dispara actualización")

@enduml